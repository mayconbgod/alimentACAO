  <!DOCTYPE html>
  <html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://kit.fontawesome.com/e68953718c.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/css/reset.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" th:href="@{${cssFile}}">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100" rel="stylesheet">
    <title>Projeto alimentAção</title>
    <style>
      .main_page {
        background-image: url(@{${bgImagePath}});
        background-size: cover;
        background-position: center;
        color: white;
        padding: 20px;
      }
      .main_page h1 {
        background-color: rgba(0, 0, 0, 0.5);
        padding: 10px;
        border-radius: 5px;
      }
      #success-message {
        display: none;
        margin-top: 20px;
        padding: 10px;
        background-color: #4CAF50;
        color: white;
        text-align: center;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
  <div class="header">
    <div class="header_menu">
      <i class="fas fa-bars"></i>
    </div>
    <img class="headerLogo" th:src="@{${logoPath}}" alt="Logo" width="280" height="60">
    <div class="header_nav_links">
      <a href="/">Home</a>
      <a href="/">Quem Somos</a>
      <a href="/">Login</a>
    </div>
    <div class="header_btn">
      <span>Cadastre-se</span>
    </div>
    <div class="lista_btn">
      <i class="fab fa-linkedin icon"></i>
      <i class="fab fa-square-instagram icon"></i>
      <i class="fab fa-square-facebook icon"></i>
      <i class="fab fa-square-whatsapp icon"></i>
      <i class="fas fa-envelope icon"></i>
    </div>
  </div>
  <div class="main_page">
    <h1 class="main_page_title">
      Contribuir com uma doação é plantar a semente da esperança na vida de alguém, cultivando um futuro melhor para todos.
    </h1>
    <div class="main_page_items">
      <div class="main_page_box">
        <h2 class="main_page_box_title">Nosso objetivo</h2>
        <p class="main_page_box_description">
          Nossa missão é reduzir o desperdício, a má distribuição de alimentos e contribuir para a diminuição de gases de efeito estufa no planeta.
        </p>
      </div>
      <div class="main_page_box">
        <h2 class="main_page_box_title">O que fazemos</h2>
        <p class="main_page_box_description">
          Através da plataforma Alimentação, nós e empresas parceiras doamos e encaminhamos alimentos que perderam valor comercial e assim gerar um grande impacto social e ambiental.
        </p>
      </div>
      <div class="main_page_box">
        <h2 class="main_page_box_title">Como você pode participar</h2>
        <p class="main_page_box_description">
          Clique aqui, cadastre-se e escolha o melhor plano e comece a nos ajudar a fazer o encaminhamento correto dos alimentos
        </p>
      </div>
    </div>
  </div>
  <div class="tela">
    <div class="laranja">
      <h1>ESCOLHA COMO DOAR:</h1>
      <div class="ulario">
        <div class="ulTit">
          <h3>doações flexíveis e de acordo com o seu bolso</h3>
          <i class="fas fa-face-smile"></i>
        </div>
        <div class="toggle">
          <div class="toggle-container">
            <input type="radio" id="mensal" name="toggle" checked>
            <label for="mensal" class="toggle-label">MENSAL</label>
            <input type="radio" id="unica" name="toggle">
            <label for="unica" class="toggle-label">ÚNICA</label>
            <div class="toggle-slider"></div>
          </div>
        </div>
        <div class="toggle-value-container">
          <div class="toggle-value-btn">
            <input type="radio" id="30" name="toggleValue" value="30" checked>
            <label for="30" class="toggle-label-value">R$ 30,00</label>
          </div>
          <div class="toggle-value-btn">
            <input type="radio" id="55" name="toggleValue" value="55">
            <label for="55" class="toggle-label-value">R$ 55,00</label>
          </div>
          <div class="toggle-value-btn">
            <input type="radio" id="100" name="toggleValue" value="100">
            <label for="100" class="toggle-label-value">R$ 100,00</label>
          </div>
          <div class="toggle-value-btn">
            <input type="radio" id="outroValor" name="toggleValue" value="outroValor">
            <label for="outroValor" class="toggle-label-value">OUTRO VALOR</label>
            <input type="number" id="valorOutro" name="valorOutro" placeholder="Insira o valor" style="display: none; margin-top: 5px;">
          </div>
        </div>
        <div class="ulario-info-user">
          <h3>Informe os seus dados de contato:</h3>
          <div class="user-input">
            <label>NOME*</label>
            <input type="text" id="name" name="name" required>
          </div>
          <div class="user-input">
            <label>EMAIL*</label>
            <input type="email" id="email" name="email" required>
          </div>
          <div class="user-input">
            <label>NUMERO DE TELEFONE*</label>
            <input type="tel" id="telefone" name="telefone" required>
          </div>
          <div class="user-input">
            <label>DATA DE NASCIMENTO*</label>
            <input type="date" id="data" name="data" required>
          </div>
          <div class="user-input">
            <label>SEXO*</label>
            <select id="sexo" name="sexo" required>
              <option value="">SELECIONE</option>
              <option value="M">MASCULINO</option>
              <option value="F">FEMININO</option>
              <option value="N">PREFIRO NÃO INFORMAR</option>
            </select>
          </div>

          <h3 class="d-user">INFORME SEUS DADOS PARA DOAÇÃO</h3>
          <div class="user-input">
            <label>CPF*</label>
            <input type="text" id="cpf" name="cpf" required>
          </div>
          <div class="user-input">
            <label>FORMAS DE DOAÇÃO*</label>
            <select id="tiposDeDoacao" name="tiposDeDoacao" required>
              <option value="">SELECIONE</option>
              <option value="CC">CARTÃO DE CRÉDITO</option>
              <option value="PIX">PIX</option>
              <option value="BOLETO">BOLETO</option>
            </select>
          </div>
          <h3>Informe seu endereço:</h3>
          <div class="user-input">
            <label>CEP*</label>
            <input type="text" id="cep" name="cep" required>
          </div>
          <div class="user-input">
            <label>RUA*</label>
            <input type="text" id="rua" name="rua" required>
          </div>
          <div class="user-input">
            <label>NÚMERO*</label>
            <input type="number" id="numeroCasa" name="numeroCasa" required>
          </div>
          <div class="user-input">
            <label>COMPLEMENTO</label>
            <input type="text" id="complemento" name="complemento">
          </div>
          <div class="user-input">
            <label>BAIRRO*</label>
            <input type="text" id="bairro" name="bairro" required>
          </div>
          <div class="user-input">
            <label>CIDADE*</label>
            <input type="text" id="cidade" name="cidade" required>
          </div>
          <div class="user-input">
            <label>ESTADO*</label>
            <input type="text" id="estado" name="estado" required>
          </div>
          <div class="check-permission">
            <input type="checkbox" id="permissionData" name="permissionDataValue">
            <label for="permissionData" class="permission-label">Li e aceito os termos e condições da política de privacidade.</label>
          </div>
          <div class="user-input finish-btn">
            <span>FINALIZAR DOAÇÃO</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="success-message"></div>
  <script>document.addEventListener('DOMContentLoaded', function() {
    const outroValorRadio = document.getElementById('outroValor');
    const valorOutroInput = document.getElementById('valorOutro');

    // mostrar/esconder o campo de "OUTRO VALOR"
    document.querySelectorAll('input[name="toggleValue"]').forEach(radio => {
      radio.addEventListener('change', function() {
        if (outroValorRadio.checked) {
          valorOutroInput.style.display = 'block';
        } else {
          valorOutroInput.style.display = 'none';
          valorOutroInput.value = ''; // Limpa o valor quando escondido
        }
      });
    });

    document.querySelector('.finish-btn span').addEventListener('click', function() {
      let valorDoacao;
      if (outroValorRadio.checked) {
        valorDoacao = parseFloat(valorOutroInput.value);
      } else {
        valorDoacao = parseFloat(document.querySelector('input[name="toggleValue"]:checked').value);
      }

      const doacao = {
        nome: document.getElementById('name').value,
        email: document.getElementById('email').value,
        telefone: document.getElementById('telefone').value,
        dataNascimento: document.getElementById('data').value,
        sexo: document.getElementById('sexo').value,
        cpf: document.getElementById('cpf').value,
        tipoDoacao: document.getElementById('tiposDeDoacao').value,
        cep: document.getElementById('cep').value,
        rua: document.getElementById('rua').value,
        numero: parseInt(document.getElementById('numeroCasa').value),
        complemento: document.getElementById('complemento').value,
        bairro: document.getElementById('bairro').value,
        cidade: document.getElementById('cidade').value,
        estado: document.getElementById('estado').value,
        aceitarTermos: document.getElementById('permissionData').checked,
        valorDoacao: valorDoacao
      };

      let url;
      if (document.getElementById('mensal').checked) {
        url = '/doacao/mensal'; // Endpoint para doação mensal
      } else if (document.getElementById('unica').checked) {
        url = '/doacao/unica'; // Endpoint para doação única
      } else {
        alert('Selecione o tipo de doação (mensal ou única).');
        return;
      }

      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(doacao)
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Erro ao enviar o formulário. Por favor, tente novamente mais tarde.');
        }
        return response.text();
      })
      .then(data => {
        // Exibir mensagem de sucesso
        document.getElementById('success-message').style.display = 'block';
        document.getElementById('success-message').textContent = data;
      })
      .catch(error => {
        alert(error.message);
      });
    });
  });
  </script>
  </body>
  </html>
